openapi: 3.0.3
info:
  title: Your Project API
  version: 1.0.0
  description: API documentation for Your Project
paths:
  /api/activate/{uidb64}/{token}/:
    get:
      operationId: activate_retrieve
      parameters:
      - in: path
        name: token
        schema:
          type: string
        required: true
      - in: path
        name: uidb64
        schema:
          type: string
        required: true
      tags:
      - activate
      security:
      - jwtAuth: []
      - {}
      responses:
        '200':
          description: Account activated successfully
        '400':
          description: Invalid activation link
  /api/analytics/:
    get:
      operationId: analytics_list
      tags:
      - analytics
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Analytics'
          description: ''
  /api/authors/:
    get:
      operationId: authors_list
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - authors
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAuthorList'
          description: ''
    post:
      operationId: authors_create
      description: Create an author (multipart/form-data with optional image)
      tags:
      - authors
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AuthorCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AuthorCreateRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/AuthorCreateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Author'
          description: ''
  /api/authors/{id}/:
    get:
      operationId: authors_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Author.
        required: true
      tags:
      - authors
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Author'
          description: ''
    put:
      operationId: authors_update
      description: Update an author (multipart/form-data with optional image)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Author.
        required: true
      tags:
      - authors
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AuthorCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AuthorCreateRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/AuthorCreateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Author'
          description: ''
    patch:
      operationId: authors_partial_update
      description: Partially update an author (multipart/form-data with optional image)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Author.
        required: true
      tags:
      - authors
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedAuthorCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedAuthorCreateRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedAuthorCreateRequest'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Author'
          description: ''
    delete:
      operationId: authors_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Author.
        required: true
      tags:
      - authors
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/authors/all/:
    get:
      operationId: authors_all_list
      description: Return all authors without pagination.
      tags:
      - authors
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Author'
          description: ''
  /api/books/:
    get:
      operationId: books_list
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - books
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookList'
          description: ''
    post:
      operationId: books_create
      description: Create a book (multipart/form-data, include image and author_id).
      tags:
      - books
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BookCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BookCreateUpdateRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/BookCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
          description: ''
  /api/books/{id}/:
    get:
      operationId: books_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Book.
        required: true
      tags:
      - books
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
          description: ''
    put:
      operationId: books_update
      description: Update a book (multipart/form-data, include image and author_id).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Book.
        required: true
      tags:
      - books
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BookCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BookCreateUpdateRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/BookCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
          description: ''
    patch:
      operationId: books_partial_update
      description: Partially update a book (multipart/form-data).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Book.
        required: true
      tags:
      - books
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedBookCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedBookCreateUpdateRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedBookCreateUpdateRequest'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
          description: ''
    delete:
      operationId: books_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Book.
        required: true
      tags:
      - books
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/change-password/:
    put:
      operationId: change_password_update
      tags:
      - change-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChangePassword'
          description: ''
    patch:
      operationId: change_password_partial_update
      tags:
      - change-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedChangePasswordRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedChangePasswordRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedChangePasswordRequest'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChangePassword'
          description: ''
  /api/login/:
    post:
      operationId: login_create
      description: |-
        Takes a set of user credentials and returns an access and refresh JSON web
        token pair to prove the authentication of those credentials.
      tags:
      - login
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MyTokenObtainPairRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MyTokenObtainPairRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MyTokenObtainPairRequest'
        required: true
      responses:
        '200':
          description: No response body
  /api/logout/:
    post:
      operationId: logout_create
      tags:
      - logout
      security:
      - jwtAuth: []
      responses:
        '204':
          description: Logout successful
        '400':
          description: Bad Request
  /api/profile/:
    get:
      operationId: profile_retrieve
      tags:
      - profile
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
          description: ''
    put:
      operationId: profile_update
      tags:
      - profile
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserProfileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserProfileRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
          description: ''
    patch:
      operationId: profile_partial_update
      tags:
      - profile
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUserProfileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUserProfileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUserProfileRequest'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
          description: ''
  /api/register/:
    post:
      operationId: register_create
      tags:
      - register
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserRequest'
        required: true
      security:
      - jwtAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
  /api/token/:
    post:
      operationId: token_create
      description: |-
        Takes a set of user credentials and returns an access and refresh JSON web
        token pair to prove the authentication of those credentials.
      tags:
      - token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenObtainPair'
          description: ''
  /api/token/refresh/:
    post:
      operationId: token_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
components:
  schemas:
    Analytics:
      type: object
      properties:
        totalBooks:
          type: integer
        totalAuthors:
          type: integer
        newBooksLast30:
          type: integer
        newAuthorsLast30:
          type: integer
        booksGrowthPct:
          type: number
          format: double
        authorsGrowthPct:
          type: number
          format: double
        buckets:
          type: array
          items:
            $ref: '#/components/schemas/MonthBucket'
      required:
      - authorsGrowthPct
      - booksGrowthPct
      - buckets
      - newAuthorsLast30
      - newBooksLast30
      - totalAuthors
      - totalBooks
    Author:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
        details:
          type: string
        image:
          type: string
          format: binary
          readOnly: true
        image_url:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - image
      - image_url
      - name
      - updated_at
    AuthorCreateRequest:
      type: object
      description: |-
        Serializer for creating/updating Author instances including image upload.
        Use this for request bodies (multipart/form-data) while responding with AuthorSerializer.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        details:
          type: string
        image:
          type: string
          format: binary
          nullable: true
      required:
      - name
    Book:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
        content:
          type: string
        image:
          type: string
          format: binary
          nullable: true
        image_url:
          type: string
          readOnly: true
        author:
          allOf:
          - $ref: '#/components/schemas/Author'
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - author
      - created_at
      - id
      - image_url
      - name
      - updated_at
    BookCreateUpdateRequest:
      type: object
      description: Serializer used for create/update operations with multipart form
        including image.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        content:
          type: string
        image:
          type: string
          format: binary
          nullable: true
        author_id:
          type: integer
      required:
      - author_id
      - name
    ChangePassword:
      type: object
      properties:
        old_password:
          type: string
        new_password:
          type: string
      required:
      - new_password
      - old_password
    ChangePasswordRequest:
      type: object
      properties:
        old_password:
          type: string
          minLength: 1
        new_password:
          type: string
          minLength: 1
      required:
      - new_password
      - old_password
    MonthBucket:
      type: object
      properties:
        label:
          type: string
        books:
          type: integer
        authors:
          type: integer
      required:
      - authors
      - books
      - label
    MyTokenObtainPairRequest:
      type: object
      properties:
        email:
          type: string
          writeOnly: true
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - email
      - password
    PaginatedAuthorList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Author'
    PaginatedBookList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Book'
    PatchedAuthorCreateRequest:
      type: object
      description: |-
        Serializer for creating/updating Author instances including image upload.
        Use this for request bodies (multipart/form-data) while responding with AuthorSerializer.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        details:
          type: string
        image:
          type: string
          format: binary
          nullable: true
    PatchedBookCreateUpdateRequest:
      type: object
      description: Serializer used for create/update operations with multipart form
        including image.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        content:
          type: string
        image:
          type: string
          format: binary
          nullable: true
        author_id:
          type: integer
    PatchedChangePasswordRequest:
      type: object
      properties:
        old_password:
          type: string
          minLength: 1
        new_password:
          type: string
          minLength: 1
    PatchedUserProfileRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          title: Full name
          maxLength: 255
    TokenObtainPair:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
          readOnly: true
      required:
      - access
      - refresh
    TokenObtainPairRequest:
      type: object
      properties:
        email:
          type: string
          writeOnly: true
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - email
      - password
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
      required:
      - access
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - refresh
    User:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: Full name
          maxLength: 255
        email:
          type: string
          format: email
          maxLength: 255
      required:
      - email
      - id
      - name
    UserProfile:
      type: object
      properties:
        email:
          type: string
          format: email
          readOnly: true
        name:
          type: string
          title: Full name
          maxLength: 255
      required:
      - email
      - name
    UserProfileRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          title: Full name
          maxLength: 255
      required:
      - name
    UserRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          title: Full name
          maxLength: 255
        password:
          type: string
          writeOnly: true
          minLength: 9
          maxLength: 20
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 255
      required:
      - email
      - name
      - password
  securitySchemes:
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
